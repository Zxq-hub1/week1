# 1 实验总述

本实验针对两种常见噪声类型：**高斯噪声**和**椒盐噪声**进行加噪，并评估**BM3D算法**在图像上的去噪性能。实验使用Set14标准数据集进行测试，通过量化指标（PSNR/SSIM）和可视化对比评估去噪效果。

# 2 环境配置

## 2.1 开发环境
操作系统：Windows11
Python版本：Python 3.9
开发工具：PyCharm 2022.3.3

## 2.2 关键组件
| 模块   | 技术栈          | 输出          |
|------|--------------|-------------|
| 数据处理 | OpenCV,Numpy | 加噪图像        |
| 去噪算法 | BM3D库        | 去噪后图像       |
| 质量评估 | scikit-image | PSNR/SSIM指标 |
| 可视化  | Matplotlib   | 对比图像        |
| 终端显示 | tqdm         | 显示进度条       |

# 3 实验方法

## 3.1 文件介绍
1. datasets/Set14:数据集
2. week1/code/denoise.py:主去噪脚本
3. week1/results:输出图像与评估指标
4. week1/results/denoising_results.csv:指标数据

## 3.2 核心功能模块
1.  配置管理（Config类）
2.  噪声添加模块
3.  去噪与评估模块
4.  结果可视化模块

### 3.2.1配置管理
 | 参数       | 值                      | 说明              |
|----------|------------------------|-----------------|
| 高斯噪声标准差  | 25                     | 中等强度噪声（0-255范围） |
| 椒盐噪声概率   | 5%                     | 5%像素受噪声影响       |
| BM3D噪声参数 | 30                     | 略高于实际噪声的估计值     |
| 数据集      | Set14                  | 14张标准测试图像       |
| 输出目录     | /project/week1/results | 保存所有结果          |

### 3.2.2 噪声添加
1. 高斯噪声：使用正态分布生成噪声矩阵$I_{noisy} = I_{clean} + \mathcal{N}(0,\sigma^2)$,clip确保像素值不溢出
2. 椒盐噪声：各2.5%概率生成黑白噪声点，共5%受影响像素


### 3.2.3去噪与评估
-   **根据噪声类型选择去噪方法**： 
    -  高斯噪声：直接使用bm3d.bm3d()去噪。  
    -  椒盐噪声：先用OpenCV的中值滤波（3x3）预处理，然后再用BM3D去噪（因为椒盐噪声是脉冲噪声，BM3D对高斯噪声效果好，对椒盐噪声可能不理想，所以先用中值滤波去除部分脉冲噪声）。  
-   **评估指标**：
    -   PSNR（峰值信噪比）：衡量像素级差异，单位dB（越高越好）
    -   SSIM（结构相似性）：评估结构信息保留度，范围[0,1]（越接近1越好）


### 3.2.4可视化结果
创建一个1行3列的图像显示，分别显示原始图像、加噪图像和去噪图像，并在加噪图像和去噪图像的标题上显示PSNR和SSIM值。


# 4 实验结果
## 4.1 量化指标对比（部分数据）
| 图像     | 噪声类型 | 加噪PSNR(dB) | 去噪PSNR(dB) | 提升     | 加噪SSIM | 去噪SSIM | 提升      |
|--------|------|------------|------------|--------|--------|--------|---------|
| baboon | 高斯   | 20.30      | 24.52      | +4.22  | 0.5718 | 0.6860 | +0.1142 |  
| lenna  | 高斯   | 20.26      | 31.38      | +11.2  | 0.3068 | 0.8318 | +0.525  | 
| pepper | 椒盐   | 18.30      | 32.11      | +13.81 | 0.3341 | 0.8424 | +0.5083 |  
| comic  | 椒盐   | 18.11      | 23.63      | +5.52  | 0.6087 | 0.7803 | +0.1716 |

## 4.2 结果总结
1. 噪声类型影响： 
    - 椒盐噪声的**去噪效果**提升更显著（平均PSNR提升8.92dB vs 高斯7.92dB） 
    - 椒盐噪声使**SSIM**下降更严重（平均0.322 vs 高斯0.376）
2. 图像特性影响： 
   - 纹理丰富图像（如baboon）提升较小 
   - 平滑区域图像（如lenna面部）提升更明显

# 实验总结
本项目不仅完成了图像**加噪去噪**的核心任务，更建立了一个可扩展的研究框架，为后续图像处理任务提供了坚实基础。
